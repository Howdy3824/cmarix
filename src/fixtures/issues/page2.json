{
"link": "<https://api.github.com/repositories/8514/issues?per_page=25&page=3>; rel=\"next\", <https://api.github.com/repositories/8514/issues?per_page=25&page=49>; rel=\"last\", <https://api.github.com/repositories/8514/issues?per_page=25&page=1>; rel=\"first\", <https://api.github.com/repositories/8514/issues?per_page=25&page=1>; rel=\"prev\"",
"data": [
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27478",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27478/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27478/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27478/events",
    "html_url": "https://github.com/rails/rails/issues/27478",
    "id": 197822465,
    "number": 27478,
    "title": "has_many :through records duplication problem",
    "user": {
      "login": "hothero",
      "id": 665345,
      "avatar_url": "https://avatars.githubusercontent.com/u/665345?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hothero",
      "html_url": "https://github.com/hothero",
      "followers_url": "https://api.github.com/users/hothero/followers",
      "following_url": "https://api.github.com/users/hothero/following{/other_user}",
      "gists_url": "https://api.github.com/users/hothero/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hothero/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hothero/subscriptions",
      "organizations_url": "https://api.github.com/users/hothero/orgs",
      "repos_url": "https://api.github.com/users/hothero/repos",
      "events_url": "https://api.github.com/users/hothero/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hothero/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-28T09:26:06Z",
    "updated_at": "2017-01-03T14:45:28Z",
    "closed_at": null,
    "body": "I think this problem is kind of this issue #16791.\r\n\r\nThere are my models:\r\n```\r\nclass Transaction < ActiveRecord::Base  \r\n  has_many :transaction_items\r\nend\r\n\r\nclass TransactionItem < ActiveRecord::Base  \r\n  belongs_to :transaction_record\r\n  belongs_to :project\r\nend\r\n\r\nclass Project < ActiveRecord::Base  \r\n  has_many :transaction_items\r\n  has_many :transaction_records, through: :transaction_items\r\nend\r\n```\r\n\r\nExample Data: \r\n![image](https://cloud.githubusercontent.com/assets/665345/21518399/1ce1841a-cd21-11e6-8209-e36e68c4d624.png)\r\n\r\nI got the wrong value when querying my database due to the sql join:\r\n```\r\nProject.find(1).transaction_records.sum(:money)\r\n# should 4200, but got 9800\r\n```\r\n\r\nIt's a sql join issue not rails issue, and I try the DISTINCT to fix duplication records but still wrong\r\n\r\n```\r\nclass Project < ActiveRecord::Base  \r\n  has_many :transaction_items\r\n  has_many :transaction_records, -> { distinct }, through: :transaction_items\r\nend  \r\n```\r\n\r\nIt works on query records, but not works on summarize. So when the same statement to sum money, I got this SQL:\r\n```\r\nSELECT DISTINCT SUM(\"transactions\".\"money\") FROM \"transactions\" INNER JOIN \"transaction_items\" ON \"transactions\".\"id\" = \"transaction_items\".\"transaction_id\" WHERE \"transactions\".\"deleted_at\" IS NULL AND \"transaction_items\".\"deleted_at\" IS NULL AND \"transaction_items\".\"project_id\" = $1  [[\"project_id\", 1]]\r\n```\r\n\r\nIt selects the distinct field of SUM(\"transactions\".\"money\"), so doesn't work on the duplication.\r\n\r\nIn last, I make a solution to use subquery. \r\n```\r\nTransaction.where(id: Project.find(1).transaction_records)\r\n```\r\n\r\nBut it's not a good solution if we need more straight thinking . Anyone have idea about how to face the has_many :through with duplication? "
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27462",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27462/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27462/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27462/events",
    "html_url": "https://github.com/rails/rails/issues/27462",
    "id": 197638150,
    "number": 27462,
    "title": "config/environments/development.rb:53:in `block in <top (required)>': uninitialized constant ActiveSupport::EventedFileUpdateChecker (NameErro",
    "user": {
      "login": "rezapci",
      "id": 8769005,
      "avatar_url": "https://avatars.githubusercontent.com/u/8769005?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rezapci",
      "html_url": "https://github.com/rezapci",
      "followers_url": "https://api.github.com/users/rezapci/followers",
      "following_url": "https://api.github.com/users/rezapci/following{/other_user}",
      "gists_url": "https://api.github.com/users/rezapci/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rezapci/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rezapci/subscriptions",
      "organizations_url": "https://api.github.com/users/rezapci/orgs",
      "repos_url": "https://api.github.com/users/rezapci/repos",
      "events_url": "https://api.github.com/users/rezapci/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rezapci/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      },
      {
        "id": 107195,
        "url": "https://api.github.com/repos/rails/rails/labels/railties",
        "name": "railties",
        "color": "8BE06E",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2016-12-27T03:03:33Z",
    "updated_at": "2017-01-01T10:24:38Z",
    "closed_at": null,
    "body": "``` sh\r\n [reza@1610:~/Demo/railsgirls$ bin/rails generate controller Say hello goodbye\r\n\r\n/home/reza/Demo/railsgirls/config/environments/development.rb:53:in `block in <top (required)>': uninitialized constant ActiveSupport::EventedFileUpdateChecker (NameError)\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/railtie.rb:210:in `instance_eval'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/railtie.rb:210:in `configure'\r\n\tfrom /home/reza/Demo/railsgirls/config/environments/development.rb:1:in `<top (required)>'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/engine.rb:598:in `block (2 levels) in <class:Engine>'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/engine.rb:597:in `each'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/engine.rb:597:in `block in <class:Engine>'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:30:in `instance_exec'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:30:in `run'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:55:in `block in run_initializers'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:422:in `block (2 levels) in each_strongly_connected_component_from'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:421:in `block in each_strongly_connected_component_from'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:44:in `each'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:44:in `tsort_each_child'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:415:in `call'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:415:in `each_strongly_connected_component_from'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:347:in `each'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:347:in `call'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\r\n\tfrom /usr/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/initializable.rb:54:in `run_initializers'\r\n\tfrom /usr/lib/ruby/vendor_ruby/rails/application.rb:352:in `initialize!'\r\n\tfrom /home/reza/Demo/railsgirls/config/environment.rb:5:in `<top (required)>'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:92:in `require'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:92:in `preload'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:143:in `serve'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:131:in `block in run'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:125:in `loop'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application.rb:125:in `run'\r\n\tfrom /var/lib/gems/2.3.0/gems/spring-2.0.0/lib/spring/application/boot.rb:19:in `<top (required)>'\r\n\tfrom /usr/local/lib/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\r\n\tfrom /usr/local/lib/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\r\n\tfrom -e:1:in `<main>'](http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report))\r\n\r\n```\r\n\r\ni created a rails new app, after the installation I add bundle exec rails about, then when I add bin/rails generate controller Say hello goodbye.  that shows the error.  \r\n\r\n### System configuration\r\n**Rails version**:\r\nrails version\r\nRails 5.0.1\r\n**Ruby version**:\r\nrvm install ruby-2.3.1\r\nrvm install ruby-2.3\r\nrvm install 2.3.1\r\nrvm install 2.3\r\n\r\nhow could i fix this?\r\n<a href=\"https://gyazo.com/b25e8282c50f79488087c71e3d12e095\"><img src=\"https://i.gyazo.com/b25e8282c50f79488087c71e3d12e095.png\" alt=\"https://gyazo.com/b25e8282c50f79488087c71e3d12e095\" width=\"1139\"/></a> #"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27457",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27457/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27457/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27457/events",
    "html_url": "https://github.com/rails/rails/issues/27457",
    "id": 197592043,
    "number": 27457,
    "title": "Adding a manipulated Activesupport::Duration to dates gives unexpected result",
    "user": {
      "login": "vmeyet",
      "id": 2462303,
      "avatar_url": "https://avatars.githubusercontent.com/u/2462303?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/vmeyet",
      "html_url": "https://github.com/vmeyet",
      "followers_url": "https://api.github.com/users/vmeyet/followers",
      "following_url": "https://api.github.com/users/vmeyet/following{/other_user}",
      "gists_url": "https://api.github.com/users/vmeyet/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/vmeyet/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/vmeyet/subscriptions",
      "organizations_url": "https://api.github.com/users/vmeyet/orgs",
      "repos_url": "https://api.github.com/users/vmeyet/repos",
      "events_url": "https://api.github.com/users/vmeyet/events{/privacy}",
      "received_events_url": "https://api.github.com/users/vmeyet/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107194,
        "url": "https://api.github.com/repos/rails/rails/labels/activesupport",
        "name": "activesupport",
        "color": "FC9300",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2016-12-26T14:13:33Z",
    "updated_at": "2017-01-03T13:23:11Z",
    "closed_at": null,
    "body": "### Bug\r\n\r\nAdding a manipulated Activesupport::Duration to dates gives unexpected result\r\n\r\n### Steps to reproduce:\r\n\r\n```ruby\r\n[1] pry(main)> pry(main)> d = Date.parse('1 Jan 2017')\r\n=> Sun, 01 Jan 2017\r\n[2] pry(main)> d + 12.hours == d + 2 * 6.hours\r\n=> false\r\n[3] pry(main)> d + 12.hours\r\n=> Sun, 01 Jan 2017 12:00:00 UTC +00:00\r\n[4] pry(main)> d + 2 * 6.hours\r\n=> Wed, 13 Apr 2135\r\n```\r\n\r\n### Expected behavior\r\n\r\nI think it's safe to expect that `date + 2 * 12.hours` gives the same result as `date + 24.hours`\r\n\r\n### Actual behavior\r\n\r\nThis is not equal. However this works fine with time/time with zone when not around daylight saving, else the same bug is present.\r\n\r\n### Suspect\r\n\r\n`2 * 12.hours` is converted to a number of seconds as an integer and then added to the date. The date coerce/convert the integer into a number of days and then add it.\r\n\r\n\r\n### System configuration\r\n\r\nRails version: 5.0.0\r\n\r\nRuby version: 2.3.1"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27455",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27455/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27455/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27455/events",
    "html_url": "https://github.com/rails/rails/issues/27455",
    "id": 197546734,
    "number": 27455,
    "title": "rails new and rails server sometime hangs and crashes on busy F5(reloading) while starting",
    "user": {
      "login": "yoshiokatsuneo",
      "id": 381300,
      "avatar_url": "https://avatars.githubusercontent.com/u/381300?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/yoshiokatsuneo",
      "html_url": "https://github.com/yoshiokatsuneo",
      "followers_url": "https://api.github.com/users/yoshiokatsuneo/followers",
      "following_url": "https://api.github.com/users/yoshiokatsuneo/following{/other_user}",
      "gists_url": "https://api.github.com/users/yoshiokatsuneo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/yoshiokatsuneo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/yoshiokatsuneo/subscriptions",
      "organizations_url": "https://api.github.com/users/yoshiokatsuneo/orgs",
      "repos_url": "https://api.github.com/users/yoshiokatsuneo/repos",
      "events_url": "https://api.github.com/users/yoshiokatsuneo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/yoshiokatsuneo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107195,
        "url": "https://api.github.com/repos/rails/rails/labels/railties",
        "name": "railties",
        "color": "8BE06E",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 6,
    "created_at": "2016-12-26T07:02:15Z",
    "updated_at": "2016-12-27T13:26:20Z",
    "closed_at": null,
    "body": "### Steps to reproduce\r\n\r\n1. Creating a new rails project using \"rails new\" using rails 5.0.1\r\n```\r\n% rails new huga\r\n% cd huga\r\n```\r\n2. Start the server (puma) with default settings (5 Threading)\r\n```\r\n% rails server\r\n```\r\n\r\n3. Send HTTP request twice at the same time, by running a command below:\r\n```\r\n$ wget -O /dev/null http://localhost:3000/ & wget -O /dev/null http://localhost:3000/\r\n```\r\nOr, on the browser(Safari, Chrome), just push F5(reloading) button many times(like 3 times / sec).\r\nBut, in this case, I can reproduce the issue once in 3-10 times.\r\n\r\n\r\n4. Normally, rails response to the request, but sometimes, rails hangs and never response for the connection after that. And, in rare case(once in 20-30 times?), after pushing \"Ctrl-C\", ruby crashes with a segmentation fault error.\r\n\r\nThe problem does not happens if I change the number of puma thread from 5 to 1. So, I guess it is related to multi threading.\r\nI see the issue on both Mac OS Sierra, and Ubuntu16.04.\r\nI see the issue on both sqlite3 and mysql database.\r\n\r\n### Expected behavior\r\nRails should not crash and response like:\r\n\r\n```\r\n$ rails server \r\n=> Booting Puma\r\n=> Rails 5.0.1 application starting in development on http://localhost:3000\r\n=> Run `rails server -h` for more startup options\r\nPuma starting in single mode...\r\n* Version 3.6.2 (ruby 2.3.3-p222), codename: Sleepy Sunday Serenity\r\n* Min threads: 5, max threads: 5\r\n* Environment: development\r\n* Listening on tcp://localhost:3000\r\nUse Ctrl-C to stop\r\nStarted GET \"/\" for ::1 at 2016-12-26 15:28:15 +0900\r\nProcessing by Rails::WelcomeController#index as HTML\r\n  Parameters: {\"internal\"=>true}\r\n  Rendering /Users/tsuneo/.rvm/gems/ruby-2.3.3@rails5/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb\r\n  Rendered /Users/tsuneo/.rvm/gems/ruby-2.3.3@rails5/gems/railties-5.0.1/lib/rails/templates/rails/welcome/index.html.erb (4.7ms)\r\nCompleted 200 OK in 25ms (Views: 12.3ms | ActiveRecord: 0.0ms)\r\n```\r\n\r\n### Actual behavior\r\nSometimes, (like once in 3-10 times) Rails hang up and never response, and output log like below:\r\n```\r\n$ rails server \r\n=> Booting Puma\r\n=> Rails 5.0.1 application starting in development on http://localhost:3000\r\n=> Run `rails server -h` for more startup options\r\nPuma starting in single mode...\r\n* Version 3.6.2 (ruby 2.3.3-p222), codename: Sleepy Sunday Serenity\r\n* Min threads: 5, max threads: 5\r\n* Environment: development\r\n* Listening on tcp://localhost:3000\r\nUse Ctrl-C to stop\r\nStarted GET \"/\" for ::1 at 2016-12-26 15:29:24 +0900\r\nStarted GET \"/\" for ::1 at 2016-12-26 15:29:24 +0900\r\n```\r\n\r\nIn rare case, after pushing Ctrl-C, following crashing report follows.\r\n```\r\n^CExiting\r\n/Users/tsuneo/.rvm/gems/ruby-2.3.3@rails5/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:270: [BUG] Segmentation fault at 0x0070000d11d938\r\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin16]\r\n\r\n-- Crash Report log information --------------------------------------------\r\n   See Crash Report log file under the one of following:                    \r\n     * ~/Library/Logs/CrashReporter                                         \r\n     * /Library/Logs/CrashReporter                                          \r\n     * ~/Library/Logs/DiagnosticReports                                     \r\n     * /Library/Logs/DiagnosticReports                                      \r\n   for more details.                                                        \r\nDon't forget to include the above Crash Report log file in bug reports.     \r\n\r\n-- Control frame information -----------------------------------------------\r\nc:0056 p:---- s:0348 e:000347 CFUNC  :const_get\r\nc:0055 p:0038 s:0344 e:000343 BLOCK  /Users/tsuneo/.rvm/gems/ruby-2.3.3@rails5/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:270 [FINISH]\r\nc:0054 p:---- s:0339 e:000338 IFUNC \r\n...\r\n```\r\n\r\nI attached the full crashing message, and diagnose report.\r\n\r\n### System configuration\r\n**Rails version**:\r\n5.0.1\r\n\r\n**Ruby version**:\r\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin16]\r\n\r\n[ruby_2016-12-26-152934_MacBook-Pro-2.crash.txt](https://github.com/rails/rails/files/672647/ruby_2016-12-26-152934_MacBook-Pro-2.crash.txt)\r\n[rails_server_crash_output.txt](https://github.com/rails/rails/files/672649/rails_server_crash_output.txt)\r\n[rails_server_crash_output_linux.txt](https://github.com/rails/rails/files/672693/rails_server_crash_output_linux.txt)\r\n"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27452",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27452/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27452/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27452/events",
    "html_url": "https://github.com/rails/rails/issues/27452",
    "id": 197496193,
    "number": 27452,
    "title": "Asking permission for docrails",
    "user": {
      "login": "riseshia",
      "id": 7338443,
      "avatar_url": "https://avatars.githubusercontent.com/u/7338443?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/riseshia",
      "html_url": "https://github.com/riseshia",
      "followers_url": "https://api.github.com/users/riseshia/followers",
      "following_url": "https://api.github.com/users/riseshia/following{/other_user}",
      "gists_url": "https://api.github.com/users/riseshia/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/riseshia/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/riseshia/subscriptions",
      "organizations_url": "https://api.github.com/users/riseshia/orgs",
      "repos_url": "https://api.github.com/users/riseshia/repos",
      "events_url": "https://api.github.com/users/riseshia/events{/privacy}",
      "received_events_url": "https://api.github.com/users/riseshia/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 150377,
        "url": "https://api.github.com/repos/rails/rails/labels/docs",
        "name": "docs",
        "color": "02d7e1",
        "default": false
      },
      {
        "id": 128692,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20feedback",
        "name": "needs feedback",
        "color": "ededed",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-25T10:47:18Z",
    "updated_at": "2016-12-25T14:14:42Z",
    "closed_at": null,
    "body": "Hi, I'm shia, who is maintainer of Korean version, contributor of Japanese, Rails Guides.\r\nI'm sorry to open this here, but I can't find proper place...\r\nif someone who read thinks it's not proper, please let me know where I could ask about this.\r\n\r\nso, here is my main topic.\r\nPlease give me the permission for docrails, It's really hard to maintain translation with rails repository.\r\nIt's heavy to work with as well as sometime, upstream break deploy process for translation. ;)\r\n\r\nfurthermore, I find some fix of railsguides during updating translation, please let me contribute easier. Here is somethings I did:\r\n\r\n- https://github.com/rails/rails/pull/26938\r\n- https://github.com/rails/rails/pull/26365\r\n- https://github.com/rails/rails/pull/26329\r\n- https://github.com/rails/rails/pull/26267\r\n\r\nThanks to read :)"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27449",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27449/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27449/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27449/events",
    "html_url": "https://github.com/rails/rails/pull/27449",
    "id": 197478120,
    "number": 27449,
    "title": "Don't call `association(scope_item).reader` in scope_relation for uniqueness validator",
    "user": {
      "login": "kamipo",
      "id": 12642,
      "avatar_url": "https://avatars.githubusercontent.com/u/12642?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamipo",
      "html_url": "https://github.com/kamipo",
      "followers_url": "https://api.github.com/users/kamipo/followers",
      "following_url": "https://api.github.com/users/kamipo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamipo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamipo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamipo/subscriptions",
      "organizations_url": "https://api.github.com/users/kamipo/orgs",
      "repos_url": "https://api.github.com/users/kamipo/repos",
      "events_url": "https://api.github.com/users/kamipo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamipo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "chancancode",
      "id": 55829,
      "avatar_url": "https://avatars.githubusercontent.com/u/55829?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/chancancode",
      "html_url": "https://github.com/chancancode",
      "followers_url": "https://api.github.com/users/chancancode/followers",
      "following_url": "https://api.github.com/users/chancancode/following{/other_user}",
      "gists_url": "https://api.github.com/users/chancancode/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/chancancode/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/chancancode/subscriptions",
      "organizations_url": "https://api.github.com/users/chancancode/orgs",
      "repos_url": "https://api.github.com/users/chancancode/repos",
      "events_url": "https://api.github.com/users/chancancode/events{/privacy}",
      "received_events_url": "https://api.github.com/users/chancancode/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "chancancode",
        "id": 55829,
        "avatar_url": "https://avatars.githubusercontent.com/u/55829?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/chancancode",
        "html_url": "https://github.com/chancancode",
        "followers_url": "https://api.github.com/users/chancancode/followers",
        "following_url": "https://api.github.com/users/chancancode/following{/other_user}",
        "gists_url": "https://api.github.com/users/chancancode/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/chancancode/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/chancancode/subscriptions",
        "organizations_url": "https://api.github.com/users/chancancode/orgs",
        "repos_url": "https://api.github.com/users/chancancode/repos",
        "events_url": "https://api.github.com/users/chancancode/events{/privacy}",
        "received_events_url": "https://api.github.com/users/chancancode/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2016-12-24T21:30:33Z",
    "updated_at": "2016-12-25T07:24:48Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27449",
      "html_url": "https://github.com/rails/rails/pull/27449",
      "diff_url": "https://github.com/rails/rails/pull/27449.diff",
      "patch_url": "https://github.com/rails/rails/pull/27449.patch"
    },
    "body": "`association(scope_item).reader` fetches the parent record from\r\ndatabase. It causes to be nil if the parent record does not exists.\r\nInstead of fetching the parent record, use `reflection.foreign_key` and\r\n`reflection.foreign_type` properly.\r\n\r\nFixes #27426."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27443",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27443/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27443/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27443/events",
    "html_url": "https://github.com/rails/rails/pull/27443",
    "id": 197403139,
    "number": 27443,
    "title": "Add Symbol/Proc support to association autosave",
    "user": {
      "login": "legendetm",
      "id": 1165749,
      "avatar_url": "https://avatars.githubusercontent.com/u/1165749?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/legendetm",
      "html_url": "https://github.com/legendetm",
      "followers_url": "https://api.github.com/users/legendetm/followers",
      "following_url": "https://api.github.com/users/legendetm/following{/other_user}",
      "gists_url": "https://api.github.com/users/legendetm/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/legendetm/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/legendetm/subscriptions",
      "organizations_url": "https://api.github.com/users/legendetm/orgs",
      "repos_url": "https://api.github.com/users/legendetm/repos",
      "events_url": "https://api.github.com/users/legendetm/events{/privacy}",
      "received_events_url": "https://api.github.com/users/legendetm/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "rafaelfranca",
      "id": 47848,
      "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelfranca",
      "html_url": "https://github.com/rafaelfranca",
      "followers_url": "https://api.github.com/users/rafaelfranca/followers",
      "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
      "repos_url": "https://api.github.com/users/rafaelfranca/repos",
      "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "rafaelfranca",
        "id": 47848,
        "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rafaelfranca",
        "html_url": "https://github.com/rafaelfranca",
        "followers_url": "https://api.github.com/users/rafaelfranca/followers",
        "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
        "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
        "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
        "repos_url": "https://api.github.com/users/rafaelfranca/repos",
        "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-23T17:20:07Z",
    "updated_at": "2017-01-06T09:34:09Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27443",
      "html_url": "https://github.com/rails/rails/pull/27443",
      "diff_url": "https://github.com/rails/rails/pull/27443.diff",
      "patch_url": "https://github.com/rails/rails/pull/27443.patch"
    },
    "body": "### Summary\r\n\r\nAdd Symbol/Proc support to association autosave to conditionally disable `autosave` when creating model. In some situations I want to bulk import associations later, but want to assign them when initializing parent object.\r\n\r\n```\r\nclass Measurement\r\n  has_many :logs, autosave: :autosave_logs\r\n  ...\r\nend\r\n```\r\n"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27440",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27440/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27440/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27440/events",
    "html_url": "https://github.com/rails/rails/issues/27440",
    "id": 197305803,
    "number": 27440,
    "title": "Journey parser should use frozen string literals",
    "user": {
      "login": "SamSaffron",
      "id": 5213,
      "avatar_url": "https://avatars.githubusercontent.com/u/5213?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/SamSaffron",
      "html_url": "https://github.com/SamSaffron",
      "followers_url": "https://api.github.com/users/SamSaffron/followers",
      "following_url": "https://api.github.com/users/SamSaffron/following{/other_user}",
      "gists_url": "https://api.github.com/users/SamSaffron/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/SamSaffron/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/SamSaffron/subscriptions",
      "organizations_url": "https://api.github.com/users/SamSaffron/orgs",
      "repos_url": "https://api.github.com/users/SamSaffron/repos",
      "events_url": "https://api.github.com/users/SamSaffron/events{/privacy}",
      "received_events_url": "https://api.github.com/users/SamSaffron/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107189,
        "url": "https://api.github.com/repos/rails/rails/labels/actionpack",
        "name": "actionpack",
        "color": "FFF700",
        "default": false
      },
      {
        "id": 128692,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20feedback",
        "name": "needs feedback",
        "color": "ededed",
        "default": false
      },
      {
        "id": 35206628,
        "url": "https://api.github.com/repos/rails/rails/labels/routing",
        "name": "routing",
        "color": "e102d8",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 8,
    "created_at": "2016-12-23T03:00:07Z",
    "updated_at": "2016-12-24T14:41:44Z",
    "closed_at": null,
    "body": "At the moment jouney parser does not have the comment\r\n\r\n```\r\n# frozen_string_literal: true\r\n```\r\n\r\nat the top. \r\n\r\nThis means that lines like this: \r\n\r\nhttps://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/journey/parser.rb#L177\r\n\r\nend up causing retention of 4961 objects on boot for Discourse. \r\n\r\nIs there anything stopping us adding `# frozen_string_literal: true` to the parser? "
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27439",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27439/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27439/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27439/events",
    "html_url": "https://github.com/rails/rails/pull/27439",
    "id": 197299180,
    "number": 27439,
    "title": "Add config.action_dispatch.cookies_default_options",
    "user": {
      "login": "hugopeixoto",
      "id": 111554,
      "avatar_url": "https://avatars.githubusercontent.com/u/111554?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/hugopeixoto",
      "html_url": "https://github.com/hugopeixoto",
      "followers_url": "https://api.github.com/users/hugopeixoto/followers",
      "following_url": "https://api.github.com/users/hugopeixoto/following{/other_user}",
      "gists_url": "https://api.github.com/users/hugopeixoto/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/hugopeixoto/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/hugopeixoto/subscriptions",
      "organizations_url": "https://api.github.com/users/hugopeixoto/orgs",
      "repos_url": "https://api.github.com/users/hugopeixoto/repos",
      "events_url": "https://api.github.com/users/hugopeixoto/events{/privacy}",
      "received_events_url": "https://api.github.com/users/hugopeixoto/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107189,
        "url": "https://api.github.com/repos/rails/rails/labels/actionpack",
        "name": "actionpack",
        "color": "FFF700",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "arthurnn",
      "id": 833383,
      "avatar_url": "https://avatars.githubusercontent.com/u/833383?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/arthurnn",
      "html_url": "https://github.com/arthurnn",
      "followers_url": "https://api.github.com/users/arthurnn/followers",
      "following_url": "https://api.github.com/users/arthurnn/following{/other_user}",
      "gists_url": "https://api.github.com/users/arthurnn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/arthurnn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/arthurnn/subscriptions",
      "organizations_url": "https://api.github.com/users/arthurnn/orgs",
      "repos_url": "https://api.github.com/users/arthurnn/repos",
      "events_url": "https://api.github.com/users/arthurnn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/arthurnn/received_events",
      "type": "User",
      "site_admin": true
    },
    "assignees": [
      {
        "login": "arthurnn",
        "id": 833383,
        "avatar_url": "https://avatars.githubusercontent.com/u/833383?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/arthurnn",
        "html_url": "https://github.com/arthurnn",
        "followers_url": "https://api.github.com/users/arthurnn/followers",
        "following_url": "https://api.github.com/users/arthurnn/following{/other_user}",
        "gists_url": "https://api.github.com/users/arthurnn/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/arthurnn/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/arthurnn/subscriptions",
        "organizations_url": "https://api.github.com/users/arthurnn/orgs",
        "repos_url": "https://api.github.com/users/arthurnn/repos",
        "events_url": "https://api.github.com/users/arthurnn/events{/privacy}",
        "received_events_url": "https://api.github.com/users/arthurnn/received_events",
        "type": "User",
        "site_admin": true
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-23T01:28:20Z",
    "updated_at": "2016-12-23T02:51:51Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27439",
      "html_url": "https://github.com/rails/rails/pull/27439",
      "diff_url": "https://github.com/rails/rails/pull/27439.diff",
      "patch_url": "https://github.com/rails/rails/pull/27439.patch"
    },
    "body": "Add an option to allow setting default values for cookie attributes globally.\r\n\r\n### Summary\r\n\r\nCookie attributes could be set on each individual cookie by using:\r\n```ruby\r\ncookies[:commenter_name] = { value: \"david\", path: \"/blog/\" }\r\n```\r\n\r\nThis change allows these attributes to be set globally in an initializer:\r\n```ruby\r\nRails.application.config.action_dispatch.cookies_default_options = {\r\n  path: \"/blog/\"\r\n}\r\n```\r\n\r\nThis was particularly helpful when hosting a Rails app under a subdirectory, to avoid cookie collisions with other apps in different paths.\r\n\r\nThere is the usual potential issue when setting the `expires` attribute, as it will be calculated at initialization time. I'm not sure of how to deal with that, apart from adding a note to the documentation. Any thoughts?\r\n"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27436",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27436/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27436/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27436/events",
    "html_url": "https://github.com/rails/rails/pull/27436",
    "id": 197185870,
    "number": 27436,
    "title": "Subtracting Dates/DateTimes returns a Duration",
    "user": {
      "login": "dfaulken",
      "id": 3988134,
      "avatar_url": "https://avatars.githubusercontent.com/u/3988134?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/dfaulken",
      "html_url": "https://github.com/dfaulken",
      "followers_url": "https://api.github.com/users/dfaulken/followers",
      "following_url": "https://api.github.com/users/dfaulken/following{/other_user}",
      "gists_url": "https://api.github.com/users/dfaulken/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/dfaulken/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/dfaulken/subscriptions",
      "organizations_url": "https://api.github.com/users/dfaulken/orgs",
      "repos_url": "https://api.github.com/users/dfaulken/repos",
      "events_url": "https://api.github.com/users/dfaulken/events{/privacy}",
      "received_events_url": "https://api.github.com/users/dfaulken/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107194,
        "url": "https://api.github.com/repos/rails/rails/labels/activesupport",
        "name": "activesupport",
        "color": "FC9300",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 8,
    "created_at": "2016-12-22T14:26:54Z",
    "updated_at": "2017-01-02T21:53:54Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27436",
      "html_url": "https://github.com/rails/rails/pull/27436",
      "diff_url": "https://github.com/rails/rails/pull/27436.diff",
      "patch_url": "https://github.com/rails/rails/pull/27436.patch"
    },
    "body": "This seems like the natural result of subtracting two points in time:\r\nthe duration of time between them. The end goal of this change is to\r\nbe able to write something like the following (e.g. in RSpec):\r\n\r\n```ruby\r\nexpect(a_datetime).to be_within(5.minutes).of another_datetime\r\n```\r\n\r\nSome thoughts about my code:\r\n\r\n1. It seems like various parts of the Duration code have the conversion\r\n  factors my method includes (e.g. 365.25 days in a year) included in\r\n  them. Those factors could be placed into a Duration constant and\r\n  referenced dynamically (which would reduce my code length as well).\r\n2. I elected to only support conversions of like objects. Personally it\r\n  seems ambiguous to compare a Date with a DateTime and return a\r\n  Duration — does one assume the Date falls at the same time of day\r\n  as the DateTime, or does one omit the time portion of the DateTime?\r\n3. There's probably a more sophisticated way of type-checking than the\r\n  `respond_to?` method I went for."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27429",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27429/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27429/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27429/events",
    "html_url": "https://github.com/rails/rails/pull/27429",
    "id": 197069484,
    "number": 27429,
    "title": "Type::Decimal casting raises exceptions on ruby 2.4.0-rc1",
    "user": {
      "login": "jhawthorn",
      "id": 131752,
      "avatar_url": "https://avatars.githubusercontent.com/u/131752?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/jhawthorn",
      "html_url": "https://github.com/jhawthorn",
      "followers_url": "https://api.github.com/users/jhawthorn/followers",
      "following_url": "https://api.github.com/users/jhawthorn/following{/other_user}",
      "gists_url": "https://api.github.com/users/jhawthorn/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/jhawthorn/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/jhawthorn/subscriptions",
      "organizations_url": "https://api.github.com/users/jhawthorn/orgs",
      "repos_url": "https://api.github.com/users/jhawthorn/repos",
      "events_url": "https://api.github.com/users/jhawthorn/events{/privacy}",
      "received_events_url": "https://api.github.com/users/jhawthorn/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107190,
        "url": "https://api.github.com/repos/rails/rails/labels/activemodel",
        "name": "activemodel",
        "color": "00E5FF",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "eileencodes",
      "id": 1080678,
      "avatar_url": "https://avatars.githubusercontent.com/u/1080678?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eileencodes",
      "html_url": "https://github.com/eileencodes",
      "followers_url": "https://api.github.com/users/eileencodes/followers",
      "following_url": "https://api.github.com/users/eileencodes/following{/other_user}",
      "gists_url": "https://api.github.com/users/eileencodes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eileencodes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eileencodes/subscriptions",
      "organizations_url": "https://api.github.com/users/eileencodes/orgs",
      "repos_url": "https://api.github.com/users/eileencodes/repos",
      "events_url": "https://api.github.com/users/eileencodes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eileencodes/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "eileencodes",
        "id": 1080678,
        "avatar_url": "https://avatars.githubusercontent.com/u/1080678?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/eileencodes",
        "html_url": "https://github.com/eileencodes",
        "followers_url": "https://api.github.com/users/eileencodes/followers",
        "following_url": "https://api.github.com/users/eileencodes/following{/other_user}",
        "gists_url": "https://api.github.com/users/eileencodes/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/eileencodes/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/eileencodes/subscriptions",
        "organizations_url": "https://api.github.com/users/eileencodes/orgs",
        "repos_url": "https://api.github.com/users/eileencodes/repos",
        "events_url": "https://api.github.com/users/eileencodes/events{/privacy}",
        "received_events_url": "https://api.github.com/users/eileencodes/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 8,
    "created_at": "2016-12-22T00:52:37Z",
    "updated_at": "2017-01-03T23:41:37Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27429",
      "html_url": "https://github.com/rails/rails/pull/27429",
      "diff_url": "https://github.com/rails/rails/pull/27429.diff",
      "patch_url": "https://github.com/rails/rails/pull/27429.patch"
    },
    "body": "### Summary\r\n\r\nOur `active_model` numeric types accept \"slightly invalid\" strings like `\"1ignore\"` (cast to `1`) and `\"bad\"` (cast to `0`). This is desirable. Users input these values, and they shouldn't result in error pages.\r\n\r\nUnder ruby `2.4.0-rc1`, entering `\"bad\"` into a decimal attribute will raise `ArgumentError: invalid value for BigDecimal():`.\r\n\r\nIn Ruby 2.4, `BigDecimal()`, as used by the Decimal cast, was changed so that it will raise `ArgumentError` when passed an invalid string, in order to be more consistent with `Integer()`, `Float()`, etc. The other numeric types use ex. `to_i` and `to_f`.\r\n\r\nUnfortunately, we can't simply change `BigDecimal()` to `to_d`. `String#to_d` raises errors like `BigDecimal()`, unlike all the other `to_*` methods ([I have filed this as a bug in ruby](https://bugs.ruby-lang.org/issues/13062)).\r\n\r\nIn the first commit of this PR, I've added tests to test the casting of these \"invalid\" strings to `Type::Integer`, `Type::Float`, and `Type::Decimal`. All of these tests pass on ruby 2.3.3 and before. On ruby 2.4.0-rc1, the new `Type::Decimal` test fails. [You can see this in a Travis run of just the first commit on ruby 2.4.0-rc1](https://travis-ci.org/rails/rails/jobs/185947970).\r\n\r\nIn the second commit I've reproduced the existing behaviour and the behaviour of the other `to_*` methods by finding a numeric string at the start of the passed in value, and parsing that using `BigDecimal()`. This might be too slow, it's certainly not the nicest solution, but I wanted to get something to show the desired behaviour.\r\n\r\n\r\n### Other Information\r\n\r\n``` ruby\r\n# ruby 2.3.3 or ruby 2.4.0preview3\r\n> BigDecimal.new('')\r\n=> #<BigDecimal:5642adf04ec0,'0.0',9(9)>\r\n> ''.to_d\r\n=> #<BigDecimal:5642adda7640,'0.0',9(9)>\r\n```\r\n\r\n``` ruby\r\n# ruby 2.4.0-rc1\r\n> BigDecimal.new('')\r\nArgumentError: invalid value for BigDecimal(): \"\"\r\n> ''.to_d\r\nArgumentError: invalid value for BigDecimal(): \"\"\r\n```\r\n\r\nOn [Solidus](https://github.com/solidusio/solidus), where I discovered this:\r\n\r\n``` ruby\r\n# ruby 2.3.3 or ruby 2.4.0preview3\r\n> Spree::Variant.new(weight: 'heavy')\r\n=> #<Spree::Variant:0x00562c17fb5060 id: nil, ..., weight: BigDecimal(0.0), ...>\r\n```s\r\n``` ruby\r\n# ruby 2.4.0-rc1\r\n> Spree::Variant.new(weight: 'heavy')\r\nArgumentError: invalid value for BigDecimal(): \"\"\r\n```\r\n\r\n\r\n## See also\r\n\r\nhttps://bugs.ruby-lang.org/issues/10286\r\nhttps://bugs.ruby-lang.org/issues/13062\r\nhttps://github.com/ruby/bigdecimal/commit/3081a627cebdc1fc119425c7a9f009dbb6bec8e8\r\n\r\nEDIT: I originally filed this with the incorrect assumption that `BigDecimal(\"1ignore\")` would fail in the same way that `Integer(\"1ignore\")` does, but `BigDecimal` does not error in that case."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27426",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27426/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27426/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27426/events",
    "html_url": "https://github.com/rails/rails/issues/27426",
    "id": 196990688,
    "number": 27426,
    "title": "5.0.0.1 -> 5.0.1 breaks validates uniqueness with relation",
    "user": {
      "login": "grosser",
      "id": 11367,
      "avatar_url": "https://avatars.githubusercontent.com/u/11367?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/grosser",
      "html_url": "https://github.com/grosser",
      "followers_url": "https://api.github.com/users/grosser/followers",
      "following_url": "https://api.github.com/users/grosser/following{/other_user}",
      "gists_url": "https://api.github.com/users/grosser/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/grosser/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/grosser/subscriptions",
      "organizations_url": "https://api.github.com/users/grosser/orgs",
      "repos_url": "https://api.github.com/users/grosser/repos",
      "events_url": "https://api.github.com/users/grosser/events{/privacy}",
      "received_events_url": "https://api.github.com/users/grosser/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 41328116,
        "url": "https://api.github.com/repos/rails/rails/labels/attached%20PR",
        "name": "attached PR",
        "color": "006b75",
        "default": false
      },
      {
        "id": 128692,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20feedback",
        "name": "needs feedback",
        "color": "ededed",
        "default": false
      },
      {
        "id": 107186,
        "url": "https://api.github.com/repos/rails/rails/labels/regression",
        "name": "regression",
        "color": "e10c02",
        "default": false
      },
      {
        "id": 126910270,
        "url": "https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps",
        "name": "With reproduction steps",
        "color": "009800",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 7,
    "created_at": "2016-12-21T17:35:49Z",
    "updated_at": "2016-12-24T22:44:17Z",
    "closed_at": null,
    "body": "this used to work ... \r\n```\r\nvalidates :name, uniqueness: {scope: [:user]}\r\n```\r\n\r\nnow needs to be:\r\n```\r\nvalidates :name, uniqueness: {scope: [:user_id]}\r\n```\r\n\r\n... either fix or warn loudly that relations are not supported"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27425",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27425/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27425/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27425/events",
    "html_url": "https://github.com/rails/rails/pull/27425",
    "id": 196987642,
    "number": 27425,
    "title": "Add channel_prefix support to AC redis/evented_redis adapters ",
    "user": {
      "login": "matrix9180",
      "id": 23177703,
      "avatar_url": "https://avatars.githubusercontent.com/u/23177703?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matrix9180",
      "html_url": "https://github.com/matrix9180",
      "followers_url": "https://api.github.com/users/matrix9180/followers",
      "following_url": "https://api.github.com/users/matrix9180/following{/other_user}",
      "gists_url": "https://api.github.com/users/matrix9180/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matrix9180/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matrix9180/subscriptions",
      "organizations_url": "https://api.github.com/users/matrix9180/orgs",
      "repos_url": "https://api.github.com/users/matrix9180/repos",
      "events_url": "https://api.github.com/users/matrix9180/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matrix9180/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 300028327,
        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
        "name": "actioncable",
        "color": "bfdadc",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "rafaelfranca",
      "id": 47848,
      "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rafaelfranca",
      "html_url": "https://github.com/rafaelfranca",
      "followers_url": "https://api.github.com/users/rafaelfranca/followers",
      "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
      "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
      "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
      "repos_url": "https://api.github.com/users/rafaelfranca/repos",
      "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
      "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "rafaelfranca",
        "id": 47848,
        "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rafaelfranca",
        "html_url": "https://github.com/rafaelfranca",
        "followers_url": "https://api.github.com/users/rafaelfranca/followers",
        "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
        "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
        "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
        "repos_url": "https://api.github.com/users/rafaelfranca/repos",
        "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2016-12-21T17:21:13Z",
    "updated_at": "2016-12-29T14:54:26Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27425",
      "html_url": "https://github.com/rails/rails/pull/27425",
      "diff_url": "https://github.com/rails/rails/pull/27425.diff",
      "patch_url": "https://github.com/rails/rails/pull/27425.patch"
    },
    "body": "### Summary\r\n\r\n#27224 \r\n\r\nIn Redis, Pub/Sub has no relation to the key space. It was made to not interfere with it on any level, including database numbers.\r\nPublishing on db 10, will be heard by a subscriber on db 1. \r\n(https://redis.io/topics/pubsub#database-amp-scoping)\r\n\r\nTo avoid problems when multiple Rails applications use the same Redis instance, the redis/evented_redis subscription adapters now support a channel_prefix option (specified in cable.yml)\r\n\r\nOther backends do not appear to have this issue.\r\n\r\nThe generated cable.yml has also been updated to reflect this change. "
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27422",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27422/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27422/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27422/events",
    "html_url": "https://github.com/rails/rails/issues/27422",
    "id": 196909227,
    "number": 27422,
    "title": "Upgrading from Rails 5.0.0.1 to Rails 5.0.1 breaks MySQL 5.0 compatibility ",
    "user": {
      "login": "VvanGemert",
      "id": 227966,
      "avatar_url": "https://avatars.githubusercontent.com/u/227966?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/VvanGemert",
      "html_url": "https://github.com/VvanGemert",
      "followers_url": "https://api.github.com/users/VvanGemert/followers",
      "following_url": "https://api.github.com/users/VvanGemert/following{/other_user}",
      "gists_url": "https://api.github.com/users/VvanGemert/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/VvanGemert/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/VvanGemert/subscriptions",
      "organizations_url": "https://api.github.com/users/VvanGemert/orgs",
      "repos_url": "https://api.github.com/users/VvanGemert/repos",
      "events_url": "https://api.github.com/users/VvanGemert/events{/privacy}",
      "received_events_url": "https://api.github.com/users/VvanGemert/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 309390193,
        "url": "https://api.github.com/repos/rails/rails/labels/MySQL",
        "name": "MySQL",
        "color": "fef2c0",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 4,
    "created_at": "2016-12-21T11:25:39Z",
    "updated_at": "2016-12-22T02:46:03Z",
    "closed_at": null,
    "body": "### Steps to reproduce\r\nI've upgraded my rails version from 5.0.0.1 to 5.0.1 and tried to deploy it. The db:migrate command failed and stopped deployment. I've rolled back to 5.0.0.1 for now.\r\n\r\n### Expected behavior\r\ndb:migrate should pass.\r\n\r\n### Actual behavior\r\nIt tries to access a table that doesn't exists in mysql 5.0, named 'referential_constraints' in information_schema db. It happens when trying to dump the schema. The error it produces when running db:migrate: \r\n```\r\nActiveRecord::StatementInvalid: Mysql2::Error: Unknown table 'referential_constraints' in information_schema: SELECT fk.referenced_table_name AS 'to_table',\r\n       fk.referenced_column_name AS 'primary_key',\r\n       fk.column_name AS 'column',\r\n       fk.constraint_name AS 'name',\r\n       rc.update_rule AS 'on_update',\r\n       rc.delete_rule AS 'on_delete'\r\nFROM information_schema.key_column_usage fk\r\nJOIN information_schema.referential_constraints rc\r\nUSING (constraint_schema, constraint_name)\r\nWHERE fk.referenced_column_name IS NOT NULL\r\n  AND fk.table_schema = 'site'\r\n  AND fk.table_name = 'account_event'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/mysql2-0.4.5/lib/mysql2/client.rb:120:in `_query'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/mysql2-0.4.5/lib/mysql2/client.rb:120:in `block in query'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/mysql2-0.4.5/lib/mysql2/client.rb:119:in `handle_interrupt'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/mysql2-0.4.5/lib/mysql2/client.rb:119:in `query'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:218:in `block in execute'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:589:in `block in log'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/notifications/instrumenter.rb:21:in `instrument'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_adapter.rb:583:in `log'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:218:in `execute'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/mysql/database_statements.rb:31:in `execute'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:225:in `execute_and_free'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/mysql/database_statements.rb:36:in `exec_query'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:373:in `select'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract/database_statements.rb:41:in `select_all'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract/query_cache.rb:95:in `select_all'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/mysql/database_statements.rb:10:in `select_all'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:520:in `foreign_keys'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:225:in `foreign_keys'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:97:in `block in tables'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:96:in `each'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:96:in `tables'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:37:in `dump'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/schema_dumper.rb:21:in `dump'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:253:in `block (4 levels) in <top (required)>'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:252:in `open'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:252:in `block (3 levels) in <top (required)>'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:66:in `block (2 levels) in <top (required)>'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/railties/databases.rake:59:in `block (2 levels) in <top (required)>'\r\n/srv/piedpiper/shared/bundle/ruby/2.3.0/gems/rake-12.0.0/exe/rake:27:in `<top (required)>'\r\n```\r\n\r\n### System configuration\r\n**Rails version**: 5.0.1\r\n**Ruby version**: 2.3.3\r\n**OS**: Ubuntu 14.04\r\n**MySQL Server**: 5.0.95"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27418",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27418/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27418/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27418/events",
    "html_url": "https://github.com/rails/rails/issues/27418",
    "id": 196714658,
    "number": 27418,
    "title": "Concurrency issues with Active Record and jRuby",
    "user": {
      "login": "remofritzsche",
      "id": 109765,
      "avatar_url": "https://avatars.githubusercontent.com/u/109765?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/remofritzsche",
      "html_url": "https://github.com/remofritzsche",
      "followers_url": "https://api.github.com/users/remofritzsche/followers",
      "following_url": "https://api.github.com/users/remofritzsche/following{/other_user}",
      "gists_url": "https://api.github.com/users/remofritzsche/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/remofritzsche/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/remofritzsche/subscriptions",
      "organizations_url": "https://api.github.com/users/remofritzsche/orgs",
      "repos_url": "https://api.github.com/users/remofritzsche/repos",
      "events_url": "https://api.github.com/users/remofritzsche/events{/privacy}",
      "received_events_url": "https://api.github.com/users/remofritzsche/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 5944892,
        "url": "https://api.github.com/repos/rails/rails/labels/JRuby",
        "name": "JRuby",
        "color": "02d7e1",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 12,
    "created_at": "2016-12-20T16:18:36Z",
    "updated_at": "2017-01-05T10:32:32Z",
    "closed_at": null,
    "body": "We have encountered multiple, severe and random concurrency issues with AR and jRuby, even in production mode. Please let me know if you'd like me to separate these two issues and whether I should copy over the full description from the sample app to this issue.\r\n\r\nMany thanks for your help.\r\n\r\n### Steps to reproduce\r\n\r\nSee [this sample application](https://github.com/remofritzsche/rails_jruby_concurrency_issues) for detailed instructions on how to reproduce these issues.\r\n\r\n### Expected behavior\r\n\r\nActive Record and Rails should work without any exceptions when using AR in multiple threads in production mode.\r\n\r\n### Actual behavior\r\n\r\nVarious, random exceptions arise. Among these:\r\n\r\n```\r\nNoMethodError: undefined method `default_scope_override' for #<Class:0x5d75f90e>\r\nDid you mean?  default_scope_override=\r\n```\r\n\r\n```\r\nException: uninitialized constant ActiveRecord::QueryMethods::PredicateBuilder\r\nDid you mean?  ActiveRecord::PredicateBuilder\r\n```\r\n\r\n```\r\nException: uninitialized constant ActiveRecord::QueryMethods::Relation\r\nDid you mean?  ActiveRecord::Relation\r\n```\r\n\r\n See the sample application for a detailed description and full stack traces.\r\n\r\n### System configuration\r\n**Rails version**: 5.0.0.1\r\n\r\n**Ruby version**: jruby 9.1.6.0 (2.3.1)"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27416",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27416/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27416/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27416/events",
    "html_url": "https://github.com/rails/rails/pull/27416",
    "id": 196688657,
    "number": 27416,
    "title": "ActionCable should not raise when a connection is already open",
    "user": {
      "login": "itsmeduncan",
      "id": 11707,
      "avatar_url": "https://avatars.githubusercontent.com/u/11707?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/itsmeduncan",
      "html_url": "https://github.com/itsmeduncan",
      "followers_url": "https://api.github.com/users/itsmeduncan/followers",
      "following_url": "https://api.github.com/users/itsmeduncan/following{/other_user}",
      "gists_url": "https://api.github.com/users/itsmeduncan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/itsmeduncan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/itsmeduncan/subscriptions",
      "organizations_url": "https://api.github.com/users/itsmeduncan/orgs",
      "repos_url": "https://api.github.com/users/itsmeduncan/repos",
      "events_url": "https://api.github.com/users/itsmeduncan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/itsmeduncan/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 300028327,
        "url": "https://api.github.com/repos/rails/rails/labels/actioncable",
        "name": "actioncable",
        "color": "bfdadc",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "javan",
      "id": 5355,
      "avatar_url": "https://avatars.githubusercontent.com/u/5355?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/javan",
      "html_url": "https://github.com/javan",
      "followers_url": "https://api.github.com/users/javan/followers",
      "following_url": "https://api.github.com/users/javan/following{/other_user}",
      "gists_url": "https://api.github.com/users/javan/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/javan/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/javan/subscriptions",
      "organizations_url": "https://api.github.com/users/javan/orgs",
      "repos_url": "https://api.github.com/users/javan/repos",
      "events_url": "https://api.github.com/users/javan/events{/privacy}",
      "received_events_url": "https://api.github.com/users/javan/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "javan",
        "id": 5355,
        "avatar_url": "https://avatars.githubusercontent.com/u/5355?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/javan",
        "html_url": "https://github.com/javan",
        "followers_url": "https://api.github.com/users/javan/followers",
        "following_url": "https://api.github.com/users/javan/following{/other_user}",
        "gists_url": "https://api.github.com/users/javan/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/javan/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/javan/subscriptions",
        "organizations_url": "https://api.github.com/users/javan/orgs",
        "repos_url": "https://api.github.com/users/javan/repos",
        "events_url": "https://api.github.com/users/javan/events{/privacy}",
        "received_events_url": "https://api.github.com/users/javan/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2016-12-20T14:39:47Z",
    "updated_at": "2017-01-06T17:50:13Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27416",
      "html_url": "https://github.com/rails/rails/pull/27416",
      "diff_url": "https://github.com/rails/rails/pull/27416.diff",
      "patch_url": "https://github.com/rails/rails/pull/27416.patch"
    },
    "body": "ActionCable was throwing a \"Existing connection must be closed before\r\nopening\" exception which was being picked up as a production issue in\r\nour error monitoring software. Since this happens pretty often on any\r\ndevice that allows the browser to sleep (mobile) this error was getting\r\ntriggered often.\r\n\r\nThis change removes the exception, but keeps logging the occurrence. We\r\nnow return `false` to let the caller now that `open` failed."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27413",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27413/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27413/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27413/events",
    "html_url": "https://github.com/rails/rails/pull/27413",
    "id": 196596092,
    "number": 27413,
    "title": "Simplify `assert_no_match %r{colname.*limit:}` regex",
    "user": {
      "login": "kamipo",
      "id": 12642,
      "avatar_url": "https://avatars.githubusercontent.com/u/12642?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamipo",
      "html_url": "https://github.com/kamipo",
      "followers_url": "https://api.github.com/users/kamipo/followers",
      "following_url": "https://api.github.com/users/kamipo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamipo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamipo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamipo/subscriptions",
      "organizations_url": "https://api.github.com/users/kamipo/orgs",
      "repos_url": "https://api.github.com/users/kamipo/repos",
      "events_url": "https://api.github.com/users/kamipo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamipo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "sgrif",
      "id": 1529387,
      "avatar_url": "https://avatars.githubusercontent.com/u/1529387?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/sgrif",
      "html_url": "https://github.com/sgrif",
      "followers_url": "https://api.github.com/users/sgrif/followers",
      "following_url": "https://api.github.com/users/sgrif/following{/other_user}",
      "gists_url": "https://api.github.com/users/sgrif/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/sgrif/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/sgrif/subscriptions",
      "organizations_url": "https://api.github.com/users/sgrif/orgs",
      "repos_url": "https://api.github.com/users/sgrif/repos",
      "events_url": "https://api.github.com/users/sgrif/events{/privacy}",
      "received_events_url": "https://api.github.com/users/sgrif/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "sgrif",
        "id": 1529387,
        "avatar_url": "https://avatars.githubusercontent.com/u/1529387?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sgrif",
        "html_url": "https://github.com/sgrif",
        "followers_url": "https://api.github.com/users/sgrif/followers",
        "following_url": "https://api.github.com/users/sgrif/following{/other_user}",
        "gists_url": "https://api.github.com/users/sgrif/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sgrif/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sgrif/subscriptions",
        "organizations_url": "https://api.github.com/users/sgrif/orgs",
        "repos_url": "https://api.github.com/users/sgrif/repos",
        "events_url": "https://api.github.com/users/sgrif/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sgrif/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2016-12-20T06:27:31Z",
    "updated_at": "2016-12-20T20:26:34Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27413",
      "html_url": "https://github.com/rails/rails/pull/27413",
      "diff_url": "https://github.com/rails/rails/pull/27413.diff",
      "patch_url": "https://github.com/rails/rails/pull/27413.patch"
    },
    "body": "In `test_schema_dump_includes_limit_constraint_for_integer_columns`,\r\n`assert_no_match %r{colname.*limit:}` simply use\r\n`assert_match %r{\"colname\"$}` instead."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27398",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27398/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27398/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27398/events",
    "html_url": "https://github.com/rails/rails/issues/27398",
    "id": 196295409,
    "number": 27398,
    "title": "\"FATAL:  Peer authentication failed for a database user\" when creating a test database ONLY",
    "user": {
      "login": "ahmed-taj",
      "id": 12673605,
      "avatar_url": "https://avatars.githubusercontent.com/u/12673605?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ahmed-taj",
      "html_url": "https://github.com/ahmed-taj",
      "followers_url": "https://api.github.com/users/ahmed-taj/followers",
      "following_url": "https://api.github.com/users/ahmed-taj/following{/other_user}",
      "gists_url": "https://api.github.com/users/ahmed-taj/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ahmed-taj/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ahmed-taj/subscriptions",
      "organizations_url": "https://api.github.com/users/ahmed-taj/orgs",
      "repos_url": "https://api.github.com/users/ahmed-taj/repos",
      "events_url": "https://api.github.com/users/ahmed-taj/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ahmed-taj/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 70310659,
        "url": "https://api.github.com/repos/rails/rails/labels/PostgreSQL",
        "name": "PostgreSQL",
        "color": "fbca04",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-18T19:50:42Z",
    "updated_at": "2016-12-20T00:29:53Z",
    "closed_at": null,
    "body": "Hello,\r\n\r\nI've got a credential error when trying to create & drop development and testing databases. The error says:\r\n\r\n```bash\r\nghost@Ghost-PC:/work/Projects/myproject$ rails db:create \r\nCreated database 'myproject_development'\r\nFATAL:  Peer authentication failed for user \"myuser\"\r\n...\r\n```\r\n\r\nWell, hold a second, this isn't a mistake in credentials, I have tested them many times, but later I noticed, the command behaves in unexpected way. as you might noticed this line:\r\n\r\n    Created database 'myproject_development'\r\n\r\nIt says, the development database has been created! and it was, I checked it out in pgadmin. But, then how it possibly fail in creating a second database using the same credentials !!\r\n\r\nIf we took step further and try `db:drop` the output would be:\r\n\r\n```bash\r\nghost@Ghost-PC:/work/Projects/myproject$ rails db:drop\r\nDropped database 'myproject_development'\r\nFATAL:  Peer authentication failed for user \"myuser\"\r\nCouldn't drop database 'myproject_test'\r\nrails aborted!\r\nPG::ConnectionBad: FATAL:  Peer authentication failed for user \"myuser\"\r\n/media/ghost/Dev/Projects/myproject/bin/rails:9:in `require'\r\n/media/ghost/Dev/Projects/myproject/bin/rails:9:in `<top (required)>'\r\n/media/ghost/Dev/Projects/myproject/bin/spring:14:in `<top (required)>'\r\nbin/rails:3:in `load'\r\nbin/rails:3:in `<main>'\r\nTasks: TOP => db:drop:_unsafe\r\n(See full trace by running task with --trace)\r\n```\r\n\r\n### Steps to reproduce\r\n\r\nI have created a new project using the following command:\r\n\r\n```\r\n$ rails new --skip-test --skip-action-mailer --skip-action-cable --api -d postgresql myproject\r\n```\r\nThen modified the `database.yml` to look like this:\r\n\r\n\r\n```yaml\r\n# PostgreSQL. Versions 9.1 and up are supported.\r\n#\r\n# Install the pg driver:\r\n#   gem install pg\r\n# On OS X with Homebrew:\r\n#   gem install pg -- --with-pg-config=/usr/local/bin/pg_config\r\n# On OS X with MacPorts:\r\n#   gem install pg -- --with-pg-config=/opt/local/lib/postgresql84/bin/pg_config\r\n# On Windows:\r\n#   gem install pg\r\n#       Choose the win32 build.\r\n#       Install PostgreSQL and put its /bin directory on your path.\r\n#\r\n# Configure Using Gemfile\r\n# gem 'pg'\r\n#\r\ndefault: &default\r\n  adapter: postgresql\r\n  encoding: unicode\r\n\r\n  # The specified database role being used to connect to postgres.\r\n  # To create additional roles in postgres see `$ createuser --help`.\r\n  # When left blank, postgres will use the default role. This is\r\n  # the same name as the operating system user that initialized the database.\r\n  username: 'myuser'\r\n\r\n  # The password associated with the postgres role (username).\r\n  password: '*****'\r\n  \r\n  # Connect on a TCP socket. Omitted by default since the client uses a\r\n  # domain socket that doesn't need configuration. Windows does not have\r\n  # domain sockets, so uncomment these lines.\r\n  # host: \r\n\r\n  # The TCP port the server listens on. Defaults to 5432.\r\n  # If your server runs on a different port number, change accordingly.\r\n  # port:\r\n\r\n  # For details on connection pooling, see rails configuration guide\r\n  # http://guides.rubyonrails.org/configuring.html#database-pooling\r\n  pool: <%= ENV.fetch(\"RAILS_MAX_THREADS\") { 5 } %>\r\n\r\n  # Minimum log levels, in increasing order:\r\n  #   debug5, debug4, debug3, debug2, debug1,\r\n  #   log, notice, warning, error, fatal, and panic\r\n  # Defaults to warning.\r\n  #min_messages: notice\r\n\r\n  # Schema search path. The server defaults to $user,public\r\n  #schema_search_path: myapp,sharedapp,public\r\n\r\ndevelopment:\r\n  <<: *default\r\n  database: myproject_development\r\n\r\n\r\n# Warning: The database defined as \"test\" will be erased and\r\n# re-generated from your development database when you run \"rake\".\r\n# Do not set this db to the same as development or production.\r\ntest:\r\n  <<: *default\r\n  database: myproject_test\r\n\r\n# As with config/secrets.yml, you never want to store sensitive information,\r\n# like your database password, in your source code. If your source code is\r\n# ever seen by anyone, they now have access to your database.\r\n#\r\n# Instead, provide the password as a unix environment variable when you boot\r\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\r\n# for a full rundown on how to provide these environment variables in a\r\n# production deployment.\r\n#\r\n# On Heroku and other platform providers, you may have a full connection URL\r\n# available as an environment variable. For example:\r\n#\r\n#   DATABASE_URL=\"postgres://myuser:mypass@localhost/somedatabase\"\r\n#\r\n# You can use this database configuration with:\r\n#\r\n#   production:\r\n#     url: <%= ENV['DATABASE_URL'] %>\r\n#\r\nproduction:\r\n  url: <%= ENV['DATABASE_URL'] %>\r\n```\r\n\r\nThen I ran:\r\n\r\n```bash\r\n$ rails db:create\r\n```\r\n\r\n### Expected behavior\r\n\r\n```bash\r\n$ rails db:create\r\nCreated database 'myproject_development'\r\nCreated database 'myproject_test'\r\n...\r\n```\r\n\r\n### Actual behavior\r\n\r\n```bash\r\nghost@Ghost-PC:/work/Projects/myproject$ rails db:create \r\nCreated database 'myproject_development'\r\nFATAL:  Peer authentication failed for user \"myuser\"\r\nCouldn't create database for {\"adapter\"=>\"postgresql\", \"encoding\"=>\"unicode\", \"username\"=>\"myuser\", \"password\"=>\"*****\", \"pool\"=>5, \"database\"=>\"myproject_test\"} \r\nrails aborted!\r\nPG::ConnectionBad: FATAL:  Peer authentication failed for user \"myuser\"\r\n/media/ghost/Dev/Projects/myproject/bin/rails:9:in `require'\r\n/media/ghost/Dev/Projects/myproject/bin/rails:9:in `<top (required)>'\r\n/media/ghost/Dev/Projects/myproject/bin/spring:14:in `<top (required)>'\r\nbin/rails:3:in `load'\r\nbin/rails:3:in `<main>'\r\nTasks: TOP => db:create\r\n(See full trace by running task with --trace)\r\n```\r\n\r\n### System configuration\r\n**Rails version**:\r\n\r\n`Rails 5.0.0.1`\r\n\r\n**Ruby version**:\r\n\r\n`ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]`\r\n"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27397",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27397/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27397/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27397/events",
    "html_url": "https://github.com/rails/rails/issues/27397",
    "id": 196289147,
    "number": 27397,
    "title": "Rails/Rake commands exiting in production environment",
    "user": {
      "login": "peric",
      "id": 1193864,
      "avatar_url": "https://avatars.githubusercontent.com/u/1193864?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/peric",
      "html_url": "https://github.com/peric",
      "followers_url": "https://api.github.com/users/peric/followers",
      "following_url": "https://api.github.com/users/peric/following{/other_user}",
      "gists_url": "https://api.github.com/users/peric/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/peric/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/peric/subscriptions",
      "organizations_url": "https://api.github.com/users/peric/orgs",
      "repos_url": "https://api.github.com/users/peric/repos",
      "events_url": "https://api.github.com/users/peric/events{/privacy}",
      "received_events_url": "https://api.github.com/users/peric/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      },
      {
        "id": 107195,
        "url": "https://api.github.com/repos/rails/rails/labels/railties",
        "name": "railties",
        "color": "8BE06E",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 5,
    "created_at": "2016-12-18T17:59:37Z",
    "updated_at": "2016-12-20T19:37:18Z",
    "closed_at": null,
    "body": "### Steps to reproduce\r\n\r\nI'm using Rails 5.0.0.1 (have just updated to 5.0.1.rc2) and I have problems with Rails/Rake commands while executing them (with whenever gem) in production. \r\n\r\nCommands are going through as they should, but each of those (have 4 cron jobs atm) finishes with SystemExit. Sometimes, there is an error message `NoMethodError: undefined method `from' for main:Object` and sometimes error says that some constants that I'm using are not available - depends on the task I'm executing. \r\n\r\nThis is an example of that error (catched in Sentry) -> https://sentry.io/share/issue/3131303433382e313933303632343039/\r\n\r\nAs I said, task are successfully doing their work, but I get this kind of error every time.\r\n\r\nI thought it has something to do with loading lib files in production (http://stackoverflow.com/questions/38198668/rails-5-load-lib-files-in-production), but I did this proposed changes and that also didn't work.\r\n\r\nI also don't experience in development environment, and neither when I run those commands manually. So, it happens just on scheduled jobs (cron jobs) in production.\r\n\r\n### Expected behavior\r\n\r\nTasks should finish without exiting and reporting errors.\r\n\r\n### Actual behavior\r\n\r\nDescribed above.\r\n\r\n### System configuration\r\n**Rails version**:\r\n5.0.0.1\r\n\r\n**Ruby version**:\r\n2.2.2p95"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27390",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27390/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27390/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27390/events",
    "html_url": "https://github.com/rails/rails/issues/27390",
    "id": 196208460,
    "number": 27390,
    "title": "use rails engine and ApplicationController inherit engine's ApplicationController then helpers not all include",
    "user": {
      "login": "geniousli",
      "id": 8176992,
      "avatar_url": "https://avatars.githubusercontent.com/u/8176992?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/geniousli",
      "html_url": "https://github.com/geniousli",
      "followers_url": "https://api.github.com/users/geniousli/followers",
      "following_url": "https://api.github.com/users/geniousli/following{/other_user}",
      "gists_url": "https://api.github.com/users/geniousli/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/geniousli/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/geniousli/subscriptions",
      "organizations_url": "https://api.github.com/users/geniousli/orgs",
      "repos_url": "https://api.github.com/users/geniousli/repos",
      "events_url": "https://api.github.com/users/geniousli/events{/privacy}",
      "received_events_url": "https://api.github.com/users/geniousli/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107189,
        "url": "https://api.github.com/repos/rails/rails/labels/actionpack",
        "name": "actionpack",
        "color": "FFF700",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2016-12-17T07:37:28Z",
    "updated_at": "2016-12-30T04:22:07Z",
    "closed_at": null,
    "body": "### Steps to reproduce\r\n``` ruby\r\n ### in rails engine\r\n module AccountAuthorize\r\n  class ApplicationController < ActionController::Base\r\n  end\r\n end\r\n\r\n### in rails project \r\nclass ApplicationController < AccountAuthorize::ApplicationController\r\nend\r\n```\r\nthen my rails project's helpers can't use in views, and i find the code\r\n\r\n``` ruby\r\nmodule ActionController\r\n  module Railties\r\n    module Helpers\r\n        def inherited(klass)\r\n           if klass.superclass == ActionController::Base && ActionController::Base.include_all_helpers\r\n          klass.helper :all\r\n        end\r\n     end\r\n   end\r\nend\r\n```\r\ndoes this is a bug ? or design?\r\n     \r\n(Guidelines for creating a bug report are [available\r\nhere](http://guides.rubyonrails.org/contributing_to_ruby_on_rails.html#creating-a-bug-report))\r\n\r\n### Expected behavior\r\nTell us what should happen\r\n\r\n### Actual behavior\r\n rails project's helpers expect application_helper, all can't use in views\r\n\r\n### System configuration\r\n**Rails version**:\r\n5.0.0\r\n\r\n**Ruby version**:\r\n2.3.1\r\n"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27389",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27389/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27389/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27389/events",
    "html_url": "https://github.com/rails/rails/pull/27389",
    "id": 196192580,
    "number": 27389,
    "title": "Fix MySQL PK dumping correctly",
    "user": {
      "login": "kamipo",
      "id": 12642,
      "avatar_url": "https://avatars.githubusercontent.com/u/12642?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/kamipo",
      "html_url": "https://github.com/kamipo",
      "followers_url": "https://api.github.com/users/kamipo/followers",
      "following_url": "https://api.github.com/users/kamipo/following{/other_user}",
      "gists_url": "https://api.github.com/users/kamipo/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/kamipo/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/kamipo/subscriptions",
      "organizations_url": "https://api.github.com/users/kamipo/orgs",
      "repos_url": "https://api.github.com/users/kamipo/repos",
      "events_url": "https://api.github.com/users/kamipo/events{/privacy}",
      "received_events_url": "https://api.github.com/users/kamipo/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 309390193,
        "url": "https://api.github.com/repos/rails/rails/labels/MySQL",
        "name": "MySQL",
        "color": "fef2c0",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "matthewd",
      "id": 1034,
      "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewd",
      "html_url": "https://github.com/matthewd",
      "followers_url": "https://api.github.com/users/matthewd/followers",
      "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewd/orgs",
      "repos_url": "https://api.github.com/users/matthewd/repos",
      "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewd/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "matthewd",
        "id": 1034,
        "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/matthewd",
        "html_url": "https://github.com/matthewd",
        "followers_url": "https://api.github.com/users/matthewd/followers",
        "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
        "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
        "organizations_url": "https://api.github.com/users/matthewd/orgs",
        "repos_url": "https://api.github.com/users/matthewd/repos",
        "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
        "received_events_url": "https://api.github.com/users/matthewd/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2016-12-17T03:11:53Z",
    "updated_at": "2017-01-06T12:42:23Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27389",
      "html_url": "https://github.com/rails/rails/pull/27389",
      "diff_url": "https://github.com/rails/rails/pull/27389.diff",
      "patch_url": "https://github.com/rails/rails/pull/27389.patch"
    },
    "body": "Follow up to #26266.\r\n\r\nCurrently master branch was lost 1fa6c9e (#22090) and #18220 due\r\nto #26266 and #26266 has another regression #27374.\r\n\r\n| primary key definition     | before #26266                     | after #26266                      |\r\n|----------------------------|-----------------------------------|-----------------------------------|\r\n| id: :primary_key (default) | int auto_increment PRIMARY KEY    | bigint auto_increment PRIMARY KEY |\r\n| id: :integer               | int PRIMARY KEY                   | int PRIMARY KEY                   |\r\n| id: :integer, default: nil | int PRIMARY KEY                   | int PRIMARY KEY                   |\r\n| id: :bigint                | bigint auto_increment PRIMARY KEY | bigint PRIMARY KEY                |\r\n| id: :bigint,  default: nil | bigint PRIMARY KEY                | bigint PRIMARY KEY                |\r\n\r\n1fa6c9e (#22090) and #18220 are to ease to create an auto incremental\r\n(or not) bigint primary key and to dump the primary key correctly.\r\n\r\nSince #26266, changed default primary key, and 1fa6c9e (#22090)\r\nand #18220 were lost. And so currently an auto incremental *int* primary\r\nkey cannot dump (lose auto increment).\r\n\r\nTo fix the issue, `integer` and `bigint` primary key has auto increment\r\nas implicit default, and legacy migration still keep its previous\r\nbehavior as before #26266.\r\n\r\n| primary key definition     | suggested fix                     |\r\n|----------------------------|-----------------------------------|\r\n| id: :primary_key (default) | bigint auto_increment PRIMARY KEY |\r\n| id: :integer               | int auto_increment PRIMARY KEY    |\r\n| id: :integer, default: nil | int PRIMARY KEY                   |\r\n| id: :bigint                | bigint auto_increment PRIMARY KEY |\r\n| id: :bigint,  default: nil | bigint PRIMARY KEY                |"
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27384",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27384/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27384/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27384/events",
    "html_url": "https://github.com/rails/rails/pull/27384",
    "id": 196051451,
    "number": 27384,
    "title": "Tweak bigint PK handling",
    "user": {
      "login": "matthewd",
      "id": 1034,
      "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewd",
      "html_url": "https://github.com/matthewd",
      "followers_url": "https://api.github.com/users/matthewd/followers",
      "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewd/orgs",
      "repos_url": "https://api.github.com/users/matthewd/repos",
      "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewd/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 309390193,
        "url": "https://api.github.com/repos/rails/rails/labels/MySQL",
        "name": "MySQL",
        "color": "fef2c0",
        "default": false
      },
      {
        "id": 257468118,
        "url": "https://api.github.com/repos/rails/rails/labels/needs%20work",
        "name": "needs work",
        "color": "000000",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "matthewd",
      "id": 1034,
      "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewd",
      "html_url": "https://github.com/matthewd",
      "followers_url": "https://api.github.com/users/matthewd/followers",
      "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewd/orgs",
      "repos_url": "https://api.github.com/users/matthewd/repos",
      "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewd/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "matthewd",
        "id": 1034,
        "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/matthewd",
        "html_url": "https://github.com/matthewd",
        "followers_url": "https://api.github.com/users/matthewd/followers",
        "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
        "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
        "organizations_url": "https://api.github.com/users/matthewd/orgs",
        "repos_url": "https://api.github.com/users/matthewd/repos",
        "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
        "received_events_url": "https://api.github.com/users/matthewd/received_events",
        "type": "User",
        "site_admin": false
      },
      {
        "login": "sgrif",
        "id": 1529387,
        "avatar_url": "https://avatars.githubusercontent.com/u/1529387?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/sgrif",
        "html_url": "https://github.com/sgrif",
        "followers_url": "https://api.github.com/users/sgrif/followers",
        "following_url": "https://api.github.com/users/sgrif/following{/other_user}",
        "gists_url": "https://api.github.com/users/sgrif/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/sgrif/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/sgrif/subscriptions",
        "organizations_url": "https://api.github.com/users/sgrif/orgs",
        "repos_url": "https://api.github.com/users/sgrif/repos",
        "events_url": "https://api.github.com/users/sgrif/events{/privacy}",
        "received_events_url": "https://api.github.com/users/sgrif/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-16T12:43:43Z",
    "updated_at": "2017-01-03T20:29:00Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27384",
      "html_url": "https://github.com/rails/rails/pull/27384",
      "diff_url": "https://github.com/rails/rails/pull/27384.diff",
      "patch_url": "https://github.com/rails/rails/pull/27384.patch"
    },
    "body": "* Don't force PKs on tables that have explicitly opted out\r\n* All integer-like PKs are autoincrement unless they have an explicit default\r\n\r\nI think this should improve things for at least some of the issues @eileencodes ran into in #27374 -- it'll still require the manual upgrade process (schema load in 5.0, then fresh schema dump in 5.1 to get the updated `schema.rb`), but the resulting schema seems more likely to recreate a correct-looking DB.\r\n\r\n(I'm also pondering whether we can/should improve on that upgrade-transition process.. but I consider that secondary for now, because it was a known limitation, not a straight bug.)\r\n\r\ncc @jmccartie \r\n\r\nNo test changes yet -- I'll see what breaks first, then hopefully just fix the tests to match."
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27381",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27381/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27381/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27381/events",
    "html_url": "https://github.com/rails/rails/pull/27381",
    "id": 196006075,
    "number": 27381,
    "title": "Show development mode exceptions with alert dialog for JavaScript requests",
    "user": {
      "login": "mrhead",
      "id": 522375,
      "avatar_url": "https://avatars.githubusercontent.com/u/522375?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/mrhead",
      "html_url": "https://github.com/mrhead",
      "followers_url": "https://api.github.com/users/mrhead/followers",
      "following_url": "https://api.github.com/users/mrhead/following{/other_user}",
      "gists_url": "https://api.github.com/users/mrhead/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/mrhead/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/mrhead/subscriptions",
      "organizations_url": "https://api.github.com/users/mrhead/orgs",
      "repos_url": "https://api.github.com/users/mrhead/repos",
      "events_url": "https://api.github.com/users/mrhead/events{/privacy}",
      "received_events_url": "https://api.github.com/users/mrhead/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107189,
        "url": "https://api.github.com/repos/rails/rails/labels/actionpack",
        "name": "actionpack",
        "color": "FFF700",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "matthewd",
      "id": 1034,
      "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/matthewd",
      "html_url": "https://github.com/matthewd",
      "followers_url": "https://api.github.com/users/matthewd/followers",
      "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
      "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
      "organizations_url": "https://api.github.com/users/matthewd/orgs",
      "repos_url": "https://api.github.com/users/matthewd/repos",
      "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
      "received_events_url": "https://api.github.com/users/matthewd/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "matthewd",
        "id": 1034,
        "avatar_url": "https://avatars.githubusercontent.com/u/1034?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/matthewd",
        "html_url": "https://github.com/matthewd",
        "followers_url": "https://api.github.com/users/matthewd/followers",
        "following_url": "https://api.github.com/users/matthewd/following{/other_user}",
        "gists_url": "https://api.github.com/users/matthewd/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/matthewd/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/matthewd/subscriptions",
        "organizations_url": "https://api.github.com/users/matthewd/orgs",
        "repos_url": "https://api.github.com/users/matthewd/repos",
        "events_url": "https://api.github.com/users/matthewd/events{/privacy}",
        "received_events_url": "https://api.github.com/users/matthewd/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 1,
    "created_at": "2016-12-16T08:34:09Z",
    "updated_at": "2016-12-16T20:27:29Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27381",
      "html_url": "https://github.com/rails/rails/pull/27381",
      "diff_url": "https://github.com/rails/rails/pull/27381.diff",
      "patch_url": "https://github.com/rails/rails/pull/27381.patch"
    },
    "body": "### Summary\r\n\r\nPreviously when an exception occurred for a SJR request, then no error was shown. You had to check the server log, or request information via browser's web development tools.\r\n\r\nThis PRs shows backend exceptions for SJR requests immediately in the alert dialog.\r\n\r\nBefore:\r\n\r\n![sjr-rails](https://cloud.githubusercontent.com/assets/522375/21256361/23684188-c372-11e6-9094-a89437b41262.gif)\r\n\r\nAfter:\r\n\r\n![sjr-rails-improved](https://cloud.githubusercontent.com/assets/522375/21256373/2f17a2ee-c372-11e6-99a6-28f24b137c1b.gif)\r\n\r\n### Other Information\r\n\r\n* I've tested it with Google Chrome, Safari and Firefox. It works great with all of them.\r\n* I've tested it with `jquery_ujs` and `rails_ujs`. "
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27376",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27376/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27376/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27376/events",
    "html_url": "https://github.com/rails/rails/pull/27376",
    "id": 195917377,
    "number": 27376,
    "title": "Raises exception when nesting respond_to calls",
    "user": {
      "login": "ptoomey3",
      "id": 103360,
      "avatar_url": "https://avatars.githubusercontent.com/u/103360?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/ptoomey3",
      "html_url": "https://github.com/ptoomey3",
      "followers_url": "https://api.github.com/users/ptoomey3/followers",
      "following_url": "https://api.github.com/users/ptoomey3/following{/other_user}",
      "gists_url": "https://api.github.com/users/ptoomey3/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/ptoomey3/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/ptoomey3/subscriptions",
      "organizations_url": "https://api.github.com/users/ptoomey3/orgs",
      "repos_url": "https://api.github.com/users/ptoomey3/repos",
      "events_url": "https://api.github.com/users/ptoomey3/events{/privacy}",
      "received_events_url": "https://api.github.com/users/ptoomey3/received_events",
      "type": "User",
      "site_admin": true
    },
    "labels": [
      {
        "id": 107189,
        "url": "https://api.github.com/repos/rails/rails/labels/actionpack",
        "name": "actionpack",
        "color": "FFF700",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": {
      "login": "pixeltrix",
      "id": 6321,
      "avatar_url": "https://avatars.githubusercontent.com/u/6321?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/pixeltrix",
      "html_url": "https://github.com/pixeltrix",
      "followers_url": "https://api.github.com/users/pixeltrix/followers",
      "following_url": "https://api.github.com/users/pixeltrix/following{/other_user}",
      "gists_url": "https://api.github.com/users/pixeltrix/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/pixeltrix/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/pixeltrix/subscriptions",
      "organizations_url": "https://api.github.com/users/pixeltrix/orgs",
      "repos_url": "https://api.github.com/users/pixeltrix/repos",
      "events_url": "https://api.github.com/users/pixeltrix/events{/privacy}",
      "received_events_url": "https://api.github.com/users/pixeltrix/received_events",
      "type": "User",
      "site_admin": false
    },
    "assignees": [
      {
        "login": "pixeltrix",
        "id": 6321,
        "avatar_url": "https://avatars.githubusercontent.com/u/6321?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/pixeltrix",
        "html_url": "https://github.com/pixeltrix",
        "followers_url": "https://api.github.com/users/pixeltrix/followers",
        "following_url": "https://api.github.com/users/pixeltrix/following{/other_user}",
        "gists_url": "https://api.github.com/users/pixeltrix/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/pixeltrix/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/pixeltrix/subscriptions",
        "organizations_url": "https://api.github.com/users/pixeltrix/orgs",
        "repos_url": "https://api.github.com/users/pixeltrix/repos",
        "events_url": "https://api.github.com/users/pixeltrix/events{/privacy}",
        "received_events_url": "https://api.github.com/users/pixeltrix/received_events",
        "type": "User",
        "site_admin": false
      }
    ],
    "milestone": null,
    "comments": 2,
    "created_at": "2016-12-15T21:13:59Z",
    "updated_at": "2016-12-15T21:21:04Z",
    "closed_at": null,
    "pull_request": {
      "url": "https://api.github.com/repos/rails/rails/pulls/27376",
      "html_url": "https://github.com/rails/rails/pull/27376",
      "diff_url": "https://github.com/rails/rails/pull/27376.diff",
      "patch_url": "https://github.com/rails/rails/pull/27376.patch"
    },
    "body": "Nesting `respond_to` calls can lead to unexpected behavior, so it should be\r\navoided. Currently, the first `respond_to` format match sets the content-type\r\nfor the resulting response. But, if a nested `respond_to` call occurs, it is possible\r\nto match on a different format. For example:\r\n\r\n``` ruby\r\n    respond_to do |outer_type|\r\n      outer_type.js do\r\n        respond_to do |inner_type|\r\n          inner_type.html { render body: \"HTML\" }\r\n        end\r\n      end\r\n    end\r\n```\r\n\r\nBrowsers will often include `*/*` in their `Accept` headers. In the above example,\r\nsuch a request would result in the `outer_type.js` match setting the `content-type` of the response to `text/javascript`, while the `inner_type.html` match will\r\ncause the actual response to return an \"HTML\" response body.\r\n\r\nThis change tries to minimize potential breakage by only raising an exception\r\nif the nested respond_to calls are in conflict with each other. So, something\r\nlike the following example would not raise an exception:\r\n\r\n``` ruby\r\n    respond_to do |outer_type|\r\n      outer_type.js do\r\n        respond_to do |inner_type|\r\n          inner_type.js { render body: \"JS\" }\r\n        end\r\n      end\r\n    end\r\n```\r\n\r\nWhile the above is nested, it doesn't affect the content-type of the response. If people think it simpler/more obvious to just raise anytime a double `respond_to` occurs (ala a double render) that seems fine too. I'm conjecturing this could be a breaking change for some people, which is why I wanted to minimize breakage by only raising when we are in actual conflict. \r\n\r\n/cc @tenderlove - Since we had chatted about \"expected behavior\" of nested `respond_to` calls and the general feeling was \"raise YugeError\" :smile:. "
  },
  {
    "url": "https://api.github.com/repos/rails/rails/issues/27374",
    "repository_url": "https://api.github.com/repos/rails/rails",
    "labels_url": "https://api.github.com/repos/rails/rails/issues/27374/labels{/name}",
    "comments_url": "https://api.github.com/repos/rails/rails/issues/27374/comments",
    "events_url": "https://api.github.com/repos/rails/rails/issues/27374/events",
    "html_url": "https://github.com/rails/rails/issues/27374",
    "id": 195893080,
    "number": 27374,
    "title": "Regression: Bigint change doesn't work for schema dump's of previous created application",
    "user": {
      "login": "eileencodes",
      "id": 1080678,
      "avatar_url": "https://avatars.githubusercontent.com/u/1080678?v=3",
      "gravatar_id": "",
      "url": "https://api.github.com/users/eileencodes",
      "html_url": "https://github.com/eileencodes",
      "followers_url": "https://api.github.com/users/eileencodes/followers",
      "following_url": "https://api.github.com/users/eileencodes/following{/other_user}",
      "gists_url": "https://api.github.com/users/eileencodes/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/eileencodes/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/eileencodes/subscriptions",
      "organizations_url": "https://api.github.com/users/eileencodes/orgs",
      "repos_url": "https://api.github.com/users/eileencodes/repos",
      "events_url": "https://api.github.com/users/eileencodes/events{/privacy}",
      "received_events_url": "https://api.github.com/users/eileencodes/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 107191,
        "url": "https://api.github.com/repos/rails/rails/labels/activerecord",
        "name": "activerecord",
        "color": "0b02e1",
        "default": false
      },
      {
        "id": 107186,
        "url": "https://api.github.com/repos/rails/rails/labels/regression",
        "name": "regression",
        "color": "e10c02",
        "default": false
      },
      {
        "id": 126910270,
        "url": "https://api.github.com/repos/rails/rails/labels/With%20reproduction%20steps",
        "name": "With reproduction steps",
        "color": "009800",
        "default": false
      }
    ],
    "state": "open",
    "locked": false,
    "assignee": null,
    "assignees": [

    ],
    "milestone": {
      "url": "https://api.github.com/repos/rails/rails/milestones/49",
      "html_url": "https://github.com/rails/rails/milestone/49",
      "labels_url": "https://api.github.com/repos/rails/rails/milestones/49/labels",
      "id": 1601639,
      "number": 49,
      "title": "5.1.0",
      "description": "",
      "creator": {
        "login": "rafaelfranca",
        "id": 47848,
        "avatar_url": "https://avatars.githubusercontent.com/u/47848?v=3",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rafaelfranca",
        "html_url": "https://github.com/rafaelfranca",
        "followers_url": "https://api.github.com/users/rafaelfranca/followers",
        "following_url": "https://api.github.com/users/rafaelfranca/following{/other_user}",
        "gists_url": "https://api.github.com/users/rafaelfranca/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/rafaelfranca/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/rafaelfranca/subscriptions",
        "organizations_url": "https://api.github.com/users/rafaelfranca/orgs",
        "repos_url": "https://api.github.com/users/rafaelfranca/repos",
        "events_url": "https://api.github.com/users/rafaelfranca/events{/privacy}",
        "received_events_url": "https://api.github.com/users/rafaelfranca/received_events",
        "type": "User",
        "site_admin": false
      },
      "open_issues": 16,
      "closed_issues": 24,
      "state": "open",
      "created_at": "2016-02-24T03:19:34Z",
      "updated_at": "2017-01-06T09:48:36Z",
      "due_on": null,
      "closed_at": null
    },
    "comments": 2,
    "created_at": "2016-12-15T19:25:04Z",
    "updated_at": "2016-12-15T21:26:51Z",
    "closed_at": null,
    "body": "I was testing something with Rails 5 master and noticed the change to use bigint at primary keys has caused an issue when using the schema dump, for example in CI or in a bin/setup script.\r\n\r\nIf the application is created previous to upgrading to Rails 5 the schema dump does not properly handle the primary key. Because the migration itself has a compatibility layer the `auto_increment` is correctly applied.\r\n\r\n```ruby\r\n#https://github.com/rails/rails/blob/master/activerecord/lib/active_record/migration/compatibility.rb#L106-L122\r\nclass V5_0 < V5_1\r\n  def create_table(table_name, options = {}) \r\n    if adapter_name == \"PostgreSQL\"\r\n      if options[:id] == :uuid && !options[:default]\r\n        options[:default] = \"uuid_generate_v4()\"\r\n      end \r\n    end \r\n\r\n    # Since 5.1 Postgres adapter uses bigserial type for primary\r\n    # keys by default and MySQL uses bigint. This compat layer makes old migrations utilize\r\n    # serial/int type instead -- the way it used to work before 5.1.\r\n    if options[:id].blank?\r\n      options[:id] = :integer\r\n      options[:auto_increment] = true\r\n    end \r\n\r\n    super\r\n  end \r\nend \r\n```\r\n\r\nThe schema dumper code, however, does not go through the compatibility layer and Active Record sees the `:id` has a type of `:integer` and has no `auto_increment` set so it gets set in the schema to a regular `:id`. Mysql though still knows it's a primary key so it will blow up when trying to insert data into the tables created.\r\n\r\n```ruby\r\n#https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/mysql/schema_definitions.rb#L5-L11\r\ndef primary_key(name, type = :primary_key, **options)\r\n  if type == :primary_key && !options.key?(:default)\r\n    options[:auto_increment] = true\r\n    options[:limit] = 8 \r\n  end \r\n  super\r\nend \r\n```\r\n\r\n[I've created a test application](https://github.com/eileencodes/migration_bug_demo). First clone the repo and run bin/setup. Then checkout the Rails master branch and try to do bin/setup again.\r\n\r\nYou'll see the following error because AR didn'tmark the primary key as auto incrementing, the ID is set to nil:\r\n\r\n```\r\nActiveRecord::NotNullViolation: Mysql2::Error: Field 'id' doesn't have a default value: INSERT INTO `posts` (`title`, `created_at`, `updated_at`) VALUES ('This is a title', '2016-12-15 19:22:00', '2016-12-15 19:22:00')\r\n```\r\n\r\nIn the output you should also see the migration properly adds the `auto_increment` option because it's going through the compatibility layer\r\n\r\n```\r\ncreate_table(:posts, {:id=>:integer, :auto_increment=>true})`\r\n```\r\n\r\nbut the schema dump version does not:\r\n\r\n```\r\ncreate_table(\"posts\", {:id=>:integer, :force=>:cascade, :options=>\"ENGINE=InnoDB DEFAULT CHARSET=utf8\"})\r\n```\r\n\r\nI can try to look into this more this weekend but thought possibly someone else may know offhand how to fix this.\r\n\r\ncc/ @jmccartie @sgrif @matthewd "
  }
]}
